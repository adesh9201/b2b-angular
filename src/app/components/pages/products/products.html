<div *ngIf="selectedProduct" class="container py-5 mt-5">
  <div class="row gx-5 gy-4">

    <!-- Left Column: Product Images -->
    <div class="col-lg-7">
      <div class="position-relative">
        <img [src]="selectedProduct.imageUrl" alt="{{ selectedProduct.name }}"
             class="img-fluid rounded shadow-sm main-img mb-3" />

        <!-- Optional: Zoom icon overlay -->
        <span class="zoom-icon"><i class="bi bi-zoom-in"></i></span>
      </div>

      <!-- Color Swatches -->
      <div class="d-flex gap-2 mt-2 flex-wrap">
        <div *ngFor="let color of selectedProduct.colors" 
             class="color-swatch rounded-circle shadow-sm"
             [style.backgroundColor]="color.toLowerCase()"
             [title]="color">
        </div>
      </div>
    </div>

    <!-- Right Column: Product Details -->
    <div class="col-lg-5">
      <h1 class="fw-bold display-6 mb-2">{{ selectedProduct.name }}</h1>
      <p class="text-muted mb-3">Brand: {{ selectedProduct.supplier }}</p>

      <!-- Ratings -->
      <div class="mb-3">
        <div class="d-flex align-items-center mb-1">
          <ng-container *ngFor="let star of [1,2,3,4,5]; let i = index">
            <i class="bi" [ngClass]="i < selectedProduct.rating ? 'bi-star-fill text-warning' : 'bi-star text-muted'"></i>
          </ng-container>
          <span class="ms-2 text-muted">({{ selectedProduct.reviews }} reviews)</span>
        </div>

        <!-- Rating bars -->
        <div *ngIf="selectedProduct.rating" class="rating-bars mt-2">
          <div *ngFor="let rate of [5,4,3,2,1]" class="d-flex align-items-center mb-1">
            <span class="me-2" style="width: 15px">{{ rate }}</span>
            <div class="progress flex-grow-1 me-2" style="height: 6px">
              <div class="progress-bar bg-warning" role="progressbar" [style.width.%]="20 * rate"></div>
            </div>
            <small class="text-muted">{{ 20 * rate }}%</small>
          </div>
        </div>
      </div>

      <!-- Price & Discount -->
      <div class="mb-4">
        <span class="fs-3 fw-bold text-primary">{{ selectedProduct.price | currency:'USD' }}</span>
        <span class="text-muted text-decoration-line-through ms-2" *ngIf="selectedProduct.originalPrice">
          {{ selectedProduct.originalPrice | currency:'USD' }}
        </span>
        <span class="badge bg-success ms-2" *ngIf="selectedProduct.discount">
          {{ selectedProduct.discount }}% OFF
        </span>
      </div>

      <!-- Options -->
      <div class="mb-3">
        <label class="form-label fw-bold">Length (in yards)</label>
        <select class="form-select">
          <option>Select Length</option>
          <option>1</option>
          <option>2</option>
          <option>3</option>
        </select>
      </div>

      <div class="mb-4">
        <label class="form-label fw-bold">Quantity</label>
        <select class="form-select">
          <option>Select Quantity</option>
          <option>1</option>
          <option>2</option>
          <option>3</option>
        </select>
      </div>

      <!-- Action Buttons -->
      <div class="d-grid gap-2 mb-4">
        <button class="btn btn-primary btn-lg">Add to Cart</button>
        <button class="btn btn-outline-secondary btn-lg">Visualize</button>
      </div>

      <!-- Product Details -->
      <div class="product-specs">
        <h5 class="fw-bold">Material Composition</h5>
        <p>{{ selectedProduct.material }}</p>

        <h5 class="fw-bold">Weight</h5>
        <p>{{ selectedProduct.weight }}</p>

        <h5 class="fw-bold">Width</h5>
        <p>{{ selectedProduct.width }}</p>

        <h5 class="fw-bold">Category</h5>
        <p>{{ selectedProduct.category }}</p>

        <h5 class="fw-bold">Attributes</h5>
        <ul>
          <li *ngFor="let attr of selectedProduct.attributes">{{ attr }}</li>
        </ul>

        <h5 class="fw-bold">Stock</h5>
        <p>{{ selectedProduct.stock }} {{ selectedProduct.unit }}</p>
      </div>
    </div>
  </div>
</div>

<div *ngIf="!selectedProduct" class="container py-5 text-center">
  <h3 class="text-danger">Product not found!</h3>
</div>
