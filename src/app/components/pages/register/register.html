<!-- ðŸ”” Toast Notification -->
<div *ngIf="showToast" class="toast-notif show" [ngClass]="{'error': isError}">
  <span class="icon">
    <i class="fas" [ngClass]="isError ? 'fa-times-circle' : 'fa-check-circle'"></i>
  </span>
  <span class="message">{{ toastMessage }}</span>
  <span class="close-btn" (click)="showToast = false">&times;</span>
</div>

<div class="registration-container">
  <h2>Supplier Registration</h2>
  <form [formGroup]="registerForm" (ngSubmit)="register()">
    <div class="row g-3">
      <div
        class="col-md-6"
        *ngFor="let field of ['name','address','pincode','state','city','gstin','pan','emailId','phone','contact_Person']"
      >
        <label class="form-label" [for]="field">{{ field | titlecase }}</label>
        <input
          class="form-control"
          [formControlName]="field"
          [id]="field"
          [type]="field === 'emailId' ? 'email' : 'text'"
          placeholder="Enter {{ field | titlecase }}"
        />
        <div
          class="text-danger mt-1"
          *ngIf="registerForm.get(field)?.invalid && registerForm.get(field)?.touched"
        >
          {{ field | titlecase }} is required
        </div>
      </div>
    </div>

    <button
      class="btn btn-primary mt-4 w-100"
      type="submit"
      [disabled]="otpSent"
    >
      Register
    </button>
  </form>

  <!-- OTP Section -->
  <div *ngIf="otpSent && !otpVerified" class="otp-section mt-4">
    <label for="otpCode">Enter OTP</label>
    <input
      type="text"
      id="otpCode"
      class="form-control mb-2"
      [(ngModel)]="otpCode"
      placeholder="Enter OTP"
    />
    <button class="btn btn-success w-100" (click)="verifyOtp()">Verify OTP</button>
  </div>

  <!-- OTP Verified -->
  <div *ngIf="otpVerified" class="alert alert-success mt-3">
    OTP Verified! You can now login.
  </div>

  <!-- Navigation to Login -->
  <div class="login-nav mt-4 text-center">
    <span>Already have an account? </span>
    <a routerLink="/login" class="text-primary fw-semibold">Go to Login</a>
  </div>
</div>
