<div class="container-fluid mt-5">
  <div class="row flex-nowrap">

    <!-- Sidebar -->
    <div class="col-auto col-lg-2 px-0 bg-light border-end min-vh-100">
      <app-sidebar></app-sidebar>
    </div>

    <!-- Main Content -->
    <div class="col px-4">

      <!-- Breadcrumb & Header -->
      <section class="bg-light py-5">
        <div class="container-fluid">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a routerLink="/home" class="nav-link">Home</a></li>
              <li class="breadcrumb-item active" aria-current="page">Dashboard</li>
            </ol>
          </nav>
          <div class="row align-items-center">
            <div class="col-md-6">
              <h1 class="fw-bold mb-2">Seller Dashboard</h1>
              <p class="text-muted mb-0">Manage your products and track your business</p>
            </div>
            <div class="col-md-6 text-md-end">
              <button class="btn btn-primary ripple" data-bs-toggle="modal" data-bs-target="#addProductModal">
                <i class="fas fa-plus me-2"></i>Add New Product
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- Stats Cards -->
      <section class="py-5">
        <div class="row g-4 mb-5">
          <div class="col-lg-3 col-md-6" *ngFor="let card of [
            {icon:'fas fa-box', value: stats.totalProducts, label:'Total Products'},
            {icon:'fas fa-shopping-cart', value: stats.totalOrders, label:'Total Orders'},
            {icon:'fas fa-dollar-sign', value: stats.totalRevenue, label:'Revenue'},
            {icon:'fas fa-star', value: stats.avgRating, label:'Rating'}
          ]">
            <div class="card border-0 shadow-sm text-center p-3 card-lift animate-on-scroll"
                 style="background:linear-gradient(135deg,#7b2ff2 0%,#f357a8 100%);color:#fff;">
              <div class="card-body">
                <div class="d-flex flex-column align-items-center">
                  <div class="bg-white bg-opacity-10 p-3 rounded mb-2">
                    <i class="{{card.icon}} fa-2x"></i>
                  </div>
                  <div class="animated-counter font-poppins fs-2">{{card.value}}</div>
                  <div class="fw-bold">{{card.label}}</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Dashboard Tabs -->
        <div class="row">
          <div class="col-12">
            <div class="card border-0 shadow-sm animate-on-scroll">
              <div class="card-header bg-white">
                <ul class="nav nav-tabs card-header-tabs" id="dashboardTabs" role="tablist">
                  <li class="nav-item" role="presentation">
                    <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#products" type="button">
                      <i class="fas fa-box me-2"></i>Products
                    </button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" data-bs-toggle="tab" data-bs-target="#orders" type="button">
                      <i class="fas fa-shopping-cart me-2"></i>Orders
                    </button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" data-bs-toggle="tab" data-bs-target="#settings" type="button">
                      <i class="fas fa-cog me-2"></i>Settings
                    </button>
                  </li>
                </ul>
              </div>

              <div class="card-body">
                <div class="tab-content" id="dashboardTabContent">

                  <!-- Products Tab -->
                  <div class="tab-pane fade show active" id="products">
                    <div class="table-responsive">
                      <table class="table table-hover">
                        <thead>
                          <tr>
                            <th>Product</th>
                            <th>Category</th>
                            <th>Price</th>
                            <th>Stock</th>
                            <th>Status</th>
                            <th>Actions</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let p of products">
                            <td>{{p.name}}</td>
                            <td>{{p.category}}</td>
                            <td>${{p.price}}</td>
                            <td>{{p.stock}}</td>
                            <td>{{p.status}}</td>
                            <td>
                              <button class="btn btn-sm btn-outline-primary">
                                <i class="fas fa-edit"></i>
                              </button>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>

                  <!-- Orders Tab -->
                  <div class="tab-pane fade" id="orders">
                    <div class="table-responsive">
                      <table class="table table-hover">
                        <thead>
                          <tr>
                            <th>Order ID</th>
                            <th>Customer</th>
                            <th>Products</th>
                            <th>Total</th>
                            <th>Status</th>
                            <th>Date</th>
                            <th>Actions</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let o of orders">
                            <td>{{o.id}}</td>
                            <td>{{o.customer}}</td>
                            <td>{{o.products.join(', ')}}</td>
                            <td>${{o.total}}</td>
                            <td><span class="badge bg-info">{{o.status}}</span></td>
                            <td>{{o.date | date:'shortDate'}}</td>
                            <td>
                              <button class="btn btn-sm btn-outline-info" data-bs-toggle="modal" data-bs-target="#orderDetailModal">
                                <i class="fas fa-eye"></i>
                              </button>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>

                  <!-- Settings Tab -->
                  <div class="tab-pane fade" id="settings">
                    <form (ngSubmit)="updateProfile()" *ngIf="profile">
                      <div class="mb-3">
                        <label class="form-label">Company Name</label>
                        <input type="text" class="form-control" [(ngModel)]="profile.companyName" name="companyName">
                      </div>
                      <div class="mb-3">
                        <label class="form-label">Contact Email</label>
                        <input type="email" class="form-control" [(ngModel)]="profile.contactEmail" name="contactEmail">
                      </div>
                      <div class="mb-3">
                        <label class="form-label">Phone Number</label>
                        <input type="tel" class="form-control" [(ngModel)]="profile.phoneNumber" name="phoneNumber">
                      </div>
                      <div class="mb-3">
                        <label class="form-label">Address</label>
                        <textarea class="form-control" [(ngModel)]="profile.address" name="address" rows="3"></textarea>
                      </div>
                      <button class="btn btn-primary ripple">Update Profile</button>
                    </form>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Add Product Modal -->
      <div class="modal fade" id="addProductModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
          <div class="modal-content dark-mode-bg">
            <div class="modal-header">
              <h5 class="modal-title">Add New Product</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
              <form (ngSubmit)="addProduct()">
                <div class="row">
                  <div class="col-md-6">
                    <div class="mb-3">
                      <label class="form-label">Product Name</label>
                      <input type="text" class="form-control" [(ngModel)]="newProduct.name" name="productName" required>
                    </div>
                    <div class="mb-3">
                      <label class="form-label">Category</label>
                      <select class="form-select" [(ngModel)]="newProduct.category" name="productCategory" required>
                        <option value="">Select category</option>
                        <option value="Cotton">Cotton</option>
                        <option value="Silk">Silk</option>
                        <option value="Wool">Wool</option>
                        <option value="Synthetic">Synthetic</option>
                        <option value="Linen">Linen</option>
                        <option value="Velvet">Velvet</option>
                      </select>
                    </div>
                    <div class="mb-3">
                      <label class="form-label">Price ($)</label>
                      <input type="number" class="form-control" [(ngModel)]="newProduct.price" name="productPrice" required>
                    </div>
                    <div class="mb-3">
                      <label class="form-label">Stock</label>
                      <input type="number" class="form-control" [(ngModel)]="newProduct.stock" name="productStock" required>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="mb-3">
                      <label class="form-label">Status</label>
                      <select class="form-select" [(ngModel)]="newProduct.status" name="productStatus">
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                      </select>
                    </div>
                    <div class="mb-3">
                      <label class="form-label">Description</label>
                      <textarea class="form-control" [(ngModel)]="newProduct.description" name="productDesc" rows="5"></textarea>
                    </div>
                    <div class="mb-3">
                      <label class="form-label">Image URL</label>
                      <input type="text" class="form-control" [(ngModel)]="newProduct.imageUrl" name="productImage">
                    </div>
                  </div>
                </div>
                <div class="text-end">
                  <button type="submit" class="btn btn-success ripple">Add Product</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
