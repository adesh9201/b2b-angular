
<div class="container-fluid mt-5">
  <div class="row flex-nowrap">

    <!-- Sidebar -->
    <div class="col-auto col-lg-2 px-0 bg-light border-end min-vh-100">
      <app-sidebar></app-sidebar>
    </div>

    <!-- Main Content -->
    <main class="col p-4">

      <!-- Header -->
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 fw-bold mb-0">Orders</h1>
        <button class="btn btn-success fw-bold" (click)="export()">Export</button>
      </div>

      <!-- Filters + Search -->
      <div class="d-flex flex-wrap align-items-center gap-2 mb-3">

        <!-- Filter Buttons -->
        <div class="btn-group" role="group" aria-label="filters">
          <button class="btn btn-outline-secondary" title="Filter">â˜°</button>
          <button class="btn btn-outline-secondary" title="Calendar">ðŸ“…</button>
          <button class="btn btn-outline-secondary" title="Customers">ðŸ‘¥</button>
        </div>

        <!-- Search -->
        <div class="ms-auto input-group" style="max-width:420px;">
          <input type="text"
                 class="form-control"
                 placeholder="Search orders..."
                 [(ngModel)]="search"
                 (keyup.enter)="onSearch()" />
          <button class="btn btn-outline-secondary" (click)="onSearch()">Search</button>
        </div>
      </div>

      <!-- Orders Table -->
      <div class="card shadow-sm mb-4">
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table table-hover align-middle mb-0">
              <thead class="table-light">
                <tr>
                  <th scope="col" style="width: 15%;">Order ID</th>
                  <th scope="col" style="width: 20%;">Buyer</th>
                  <th scope="col" style="width: 15%;">Status</th>
                  <th scope="col" style="width: 15%;">Date</th>
                  <th scope="col" style="width: 15%;">Amount</th>
                  <th scope="col" style="width: 20%;">Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let o of orders">
                  <td>#{{o.id}}</td>
                  <td class="text-muted">{{o.buyer}}</td>
                  <td>
                    <span class="badge bg-success">{{o.status}}</span>
                  </td>
                  <td class="text-muted">{{fmtDate(o.date)}}</td>
                  <td class="text-muted">${{o.amount | number:'1.2-2'}}</td>
                  <td>
                    <button class="btn btn-sm btn-outline-primary">View</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Pagination -->
          <div class="d-flex justify-content-between align-items-center p-3 border-top">
            <small class="text-muted">Showing {{orders.length}} of {{total}}</small>
            <div>
              <button class="btn btn-sm btn-outline-secondary me-2"
                      (click)="changePage(-1)"
                      [disabled]="page===1">
                Prev
              </button>
              <button class="btn btn-sm btn-outline-secondary"
                      (click)="changePage(1)"
                      [disabled]="orders.length < perPage">
                Next
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Loader -->
      <div *ngIf="loading" class="text-center text-muted py-3">
        <div class="spinner-border spinner-border-sm me-2"></div>
        Loading...
      </div>

    </main>
  </div>
</div>
